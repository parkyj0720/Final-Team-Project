<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cXml">
<!-- r_crawling_addr, r_main_thumbs, r_title -->
<select id="cListAll" resultType="Food.CDto">
	select REC_IDX, REC_CRAWLING_ADDR, REC_MAIN_IMG, REC_IMG_NAME, REC_TIT 
	from RECIPE_T
	where REC_CONTENT is not null and REC_PEOPLE is not null and REC_COOKING_TIME is not null and REC_DIFICULTY is not null
	order by REC_IDX ASC
</select>

<select id="cSearchList" resultType="Food.CDto" parameterType="String">
	select REC_IDX, REC_CRAWLING_ADDR, REC_MAIN_IMG, REC_IMG_NAME, REC_TIT 
	from RECIPE_T 
	where REC_TIT like CONCAT('%', #{search}, '%')
</select>

<select id="cDetail" resultType="Food.CDto">
	select *
	from RECIPE_T
	where REC_IDX = #{REC_IDX}
</select>

<insert id="cInsert" parameterType="Food.CDto">

	insert into RECIPE_T (REC_IDX,
	REC_CRAWLING_ADDR,
	REC_MAIN_IMG,
	REC_IMG_NAME,
	REC_TIT,
	REC_CONTENT,
	REC_PEOPLE,
	REC_COOKING_TIME,
	REC_DIFICULTY,
	REC_INGREDIENT,
	REC_COOKING_METHOD)

	values(#{REC_IDX},
	#{REC_CRAWLING_ADDR},
	#{REC_MAIN_IMG},
	#{REC_IMG_NAME},
	#{REC_TIT},
	#{REC_CONTENT},
	#{REC_PEOPLE},
	#{REC_COOKING_TIME},
	#{REC_DIFICULTY},
	#{REC_INGREDIENT},
	#{REC_COOKING_METHOD})
</insert>

<delete id="deleteRecipe" parameterType="int">
	delete
	from RECIPE_T
	where REC_IDX = #{rec_idx}
</delete>

<select id="memberInfo" resultType="Member.MemberDto" parameterType="String">
	select *
	from MEMBER_T
	where MEM_ID = #{userId}
</select>


</mapper>