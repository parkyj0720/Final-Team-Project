<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cXml">
<!-- r_crawling_addr, r_main_thumbs, r_title -->
<select id="cListAll" resultType="Food.CDto">
	select r_board_no, r_crawling_addr, r_main_thumbs, r_filename, r_title 
	from recipe
	order by r_board_no ASC
</select>

<select id="cSearchList" resultType="Food.CDto" parameterType="String">
	select r_board_no, r_crawling_addr, r_main_thumbs, r_filename, r_title 
	from recipe 
	where r_title like '%'||#{search}||'%'
</select>

<select id="cDetail" resultType="Food.CDto">
	select *
	from recipe
	where r_board_no = #{r_board_no}
</select>

<insert id="cInsertTest" parameterType="Food.CDto">

	<selectKey keyProperty="r_board_no" resultType="int" order="BEFORE">
        SELECT seq_board_no.nextval FROM DUAL
    </selectKey>

	insert into recipe (r_board_no,
	r_crawling_addr,
	r_main_thumbs,
	r_filename,
	r_title,
	r_explain,
	r_standard,
	r_cooking_time,
	r_difficult,
	r_ingredient,
	r_cooking_order)

	values(#{r_board_no},
	#{r_crawling_addr},
	#{r_main_thumbs},
	#{r_filename},
	#{r_title},
	#{r_explain},
	#{r_standard},
	#{r_cooking_time},
	#{r_difficult},
	#{r_ingredient},
	#{r_cooking_order})
</insert>

</mapper>